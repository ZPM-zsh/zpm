#compdef zpm
#autoload

local -a _1st_arguments
_1st_arguments=(
  'upgrade:Upgrade plugin'
  'load:Load plugin'
)

_arguments \
    '*:: :->subcmds' && return 0

if (( CURRENT == 1 )); then
  _describe -t commands "zpm subcommand" _1st_arguments
  return
fi

if (( CURRENT > 1 )); then
  case "$words[1]" in
    u|up|upgrade)
      _describe -t commands "zpm plugins" _ZPM_Plugins_3rdparty
    ;;
    l|load)
      _describe -t commands "zpm plugins" _ZPM_Plugins_core
    ;;
  esac
fi


return
